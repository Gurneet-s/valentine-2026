<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Valentine for Annuradha ğŸ’Œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --background: #fffaef;
            --valentine: #9a0101;
            --card-bg: #fff;
            --card-shadow: rgba(154, 1, 1, 0.14);
        }
        body { background-color: var(--background); font-family: ui-sans-serif, system-ui, sans-serif; overflow: hidden; touch-action: manipulation; }

        @keyframes float-heart {
            0%, 100% { transform: translateY(0) rotate(0); opacity: 0.25; }
            50% { transform: translateY(-20px) rotate(10deg); opacity: 0.15; }
        }
        .float-heart { animation: float-heart 4s ease-in-out infinite; position: absolute; }
        
        @keyframes heartbeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        .animate-heartbeat { animation: heartbeat 1.5s ease-in-out infinite; }

        .hidden { display: none !important; }
        
        .envelope-wrapper.open .envelope-flap { transform: rotateX(180deg); z-index: 0; }
        .envelope-wrapper.open .envelope-letter { transform: translateY(-60px); z-index: 20; }
        
        #noBtn { transition: all 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: absolute; }
        #yesBtn { transition: transform 0.2s ease, left 0.3s ease, top 0.3s ease; }

        .success-card {
            background: var(--card-bg);
            border: 1px solid rgba(154, 1, 1, 0.1);
            box-shadow: 0 10px 30px var(--card-shadow);
            border-radius: 2rem;
            padding: 2rem;
            max-width: 400px;
            margin: auto;
        }

        .photo-frame {
            display: inline-block;
            padding: 10px;
            background: white;
            box-shadow: 0 10px 25px rgba(154, 1, 1, 0.2);
            border-radius: 20px;
            transform: rotate(-2deg);
            margin-bottom: 20px;
        }
    </style>
</head>
<body class="antialiased min-h-screen">

    <div class="absolute inset-0 pointer-events-none overflow-hidden">
        <div class="float-heart text-3xl" style="top: 8%; left: 6%;">ğŸ’—</div>
        <div class="float-heart text-2xl" style="top: 15%; right: 8%; animation-delay: 1s;">ğŸŒ¸</div>
        <div class="float-heart text-2xl" style="bottom: 35%; left: 5%; animation-delay: 2s;">ğŸŒ¹</div>
        <div class="float-heart text-3xl" style="bottom: 25%; right: 7%; animation-delay: 0.5s;">ğŸ’•</div>
        <div class="float-heart text-xl" style="top: 35%; right: 4%; animation-delay: 1.5s;">ğŸ€</div>
        <div class="float-heart text-2xl" style="top: 55%; left: 6%; animation-delay: 2.5s;">ğŸ’˜</div>
    </div>

    <div class="relative z-10 min-h-screen flex items-center justify-center px-4">
        
        <div id="envelope-page" class="text-center">
            <p class="text-lg font-semibold mb-2 text-[#1a0505]">You have a Valentine ğŸ’Œ</p>
            <p class="text-xs opacity-60 mb-6 text-[#1a0505]">From Gunny</p>
            <button type="button" onclick="openMail()" class="hover:scale-105 active:scale-95 transition-transform">
                <div class="envelope-wrapper relative w-72 h-48 mx-auto" id="env-wrap">
                    <div class="absolute -inset-6 rounded-3xl" style="background: radial-gradient(rgba(154, 1, 1, 0.1) 0%, transparent 70%);"></div>
                    <div class="absolute inset-0 bg-gradient-to-b from-[#ffebeb] to-[#ffd6d6] border-2 border-[#d4a0a0] rounded-xl shadow-2xl"></div>
                    <div class="envelope-flap absolute inset-x-0 top-0 bg-[#ffc8c8] border-2 border-[#d4a0a0] h-1/2 transition-all duration-700 origin-top" style="clip-path: polygon(0 0, 50% 100%, 100% 0); border-radius: 12px 12px 0 0;"></div>
                    <div class="absolute top-1/4 left-1/2 -translate-x-1/2 text-2xl animate-heartbeat z-10">â¤ï¸</div>
                    <div class="envelope-letter absolute inset-x-3 bottom-2 bg-white rounded-lg shadow-lg border border-[#e8b4b4] h-20 flex flex-col items-center justify-center transition-all duration-700">
                        <span class="text-xl">ğŸ’˜</span>
                        <span class="font-bold text-sm text-[#1a0505]">A Valentine for Annuradha</span>
                    </div>
                </div>
            </button>
            <p class="text-xs mt-6 animate-pulse font-medium text-[#1a0505]">Tap the envelope to open</p>
        </div>

        <div id="question-page" class="hidden text-center max-w-lg mx-auto w-full h-full">
            <h1 class="text-2xl md:text-4xl font-extrabold mb-2 text-[#1a0505]">Will you be my Valentine, Annuradha? ğŸ’˜</h1>
            <p class="text-sm mb-8 opacity-70 text-[#1a0505]">From: Gunny âœ¨</p>
            
            <div id="button-container" class="flex justify-center gap-4 items-center relative h-64">
                <button id="yesBtn" onclick="finish()" class="bg-[#e83333] text-white rounded-2xl px-10 py-4 font-bold shadow-xl z-20">
                    YES âœ¨
                </button>
                <button id="noBtn" 
                    onmouseover="dodge()" 
                    ontouchstart="dodge()" 
                    onclick="dodge()" 
                    class="bg-white border border-gray-200 shadow-lg rounded-xl px-5 py-2.5 font-semibold text-sm z-50 whitespace-nowrap text-[#1a0505]">
                    No ğŸ™ˆ
                </button>
            </div>
        </div>

        <div id="success-page" class="hidden text-center">
           <div class="success-card">
                <div class="photo-frame">
                    <img src="your-photo.jpg" id="finalPhoto" class="w-64 h-64 object-cover mx-auto rounded-xl shadow-md border-2 border-pink-100">
                </div>
               <h1 class="text-2xl font-bold text-[#9a0101] mb-2">Hehe, I knew it! ğŸ¥°</h1>
               
               <div class="bg-[#fff5f5] rounded-xl p-4 mt-4 border border-pink-100">
                   <p class="text-[#9a0101] text-sm leading-relaxed italic">
                    "I know it's early days, but it felt wrong not to wish a Happy Valentine's Day to the girl who's been keeping me so entertained this week."
                   </p>
                   <p class="mt-3 text-xs font-bold text-[#1a0505]/50">â€” From Gunny ğŸŒ¸</p>
               </div>
           </div>
        </div>

    </div>

    <script>
        let noCount = 0;
        const noTexts = [
            "No ğŸ™ˆ", "Wait really? ğŸ¥º", "Please reconsider ğŸ’”", "My heart is breaking ğŸ˜­", 
            "I'll cry for real ğŸ¥¹", "You're making me sad ğŸ˜¢", "Fineâ€¦ just say yes ğŸ« ", 
            "My heart can't take this ğŸ’—", "Say yes or I'll pout ğŸ¥º", "Even your heart says yes ğŸ’˜", 
            "I'll keep asking forever ğŸ”", "Resistance is futile ğŸ’•", "Just one tiny yes? ğŸ¤", 
            "You're so cute when you say no ğŸ¥°", "OK butâ€¦ yes? ğŸ‘€", "Wrong answer babe ğŸ˜¤", 
            "That wasn't an option ğŸ’…", "Try the other button ğŸ‘‰", "I don't accept this ğŸ™…", 
            "Click YES already ğŸ˜©", "You know you want to ğŸ˜", "Stop playing hard to get ğŸ«£"
        ];

        function openMail() {
            document.getElementById('env-wrap').classList.add('open');
            setTimeout(() => {
                document.getElementById('envelope-page').classList.add('hidden');
                document.getElementById('question-page').classList.remove('hidden');
                
                const noBtn = document.getElementById('noBtn');
                const yesBtn = document.getElementById('yesBtn');
                noBtn.style.top = (yesBtn.offsetTop) + "px";
                noBtn.style.left = (yesBtn.offsetLeft + 120) + "px";
            }, 800);
        }

        function dodge() {
            noCount++;
            const noBtn = document.getElementById('noBtn');
            const yesBtn = document.getElementById('yesBtn');

            // 1. Update text from sequence
            if (noCount < noTexts.length) {
                noBtn.innerText = noTexts[noCount];
            }

            // 2. Scale the YES button
            const scale = 1 + (noCount * 0.25);
            yesBtn.style.transform = `scale(${scale})`;

            // 3. Move NO button to random position
            const padding = 50;
            const maxX = window.innerWidth - noBtn.offsetWidth - padding;
            const maxY = window.innerHeight - noBtn.offsetHeight - padding;
            
            const randomX = Math.max(padding, Math.floor(Math.random() * maxX));
            const randomY = Math.max(padding, Math.floor(Math.random() * maxY));

            noBtn.style.position = 'fixed';
            noBtn.style.left = randomX + 'px';
            noBtn.style.top = randomY + 'px';

            // 4. Move YES button too after many clicks
            if (noCount > 15) {
                yesBtn.style.position = 'fixed';
                yesBtn.style.left = Math.max(padding, Math.floor(Math.random() * (window.innerWidth - 150))) + 'px';
                yesBtn.style.top = Math.max(padding, Math.floor(Math.random() * (window.innerHeight - 100))) + 'px';
            }
        }

        function finish() {
            const duration = 5 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 1000 };

            function randomInRange(min, max) { return Math.random() * (max - min) + min; }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }, colors: ['#ff0000', '#ff4d6d', '#ff758f', '#9a0101'] }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }, colors: ['#ff0000', '#ff4d6d', '#ff758f', '#9a0101'] }));
            }, 250);

            document.getElementById('question-page').classList.add('hidden');
            document.getElementById('success-page').classList.remove('hidden');
            document.getElementById('noBtn').classList.add('hidden');
        }
    </script>
</body>
</html>